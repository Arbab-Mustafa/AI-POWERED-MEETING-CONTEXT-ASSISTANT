================================================================================
ENVIRONMENT SETUP GUIDE - CONTEXTMEET
Complete step-by-step instructions for obtaining and configuring all keys
================================================================================

This document provides detailed instructions for obtaining and setting up all
required environment variables for ContextMeet development.

================================================================================
SECTION 1: BACKEND ENVIRONMENT VARIABLES
================================================================================

File: backend/.env

Total variables needed: 17
Follow each step carefully to obtain credentials.

---

VARIABLE 1: SECRET_KEY
Purpose: JWT token signing and security
Type: Cryptographic key (string)
Required: YES
Default: None (must be set)

How to Generate:
1. Use Python to generate a secure random key
2. Open terminal/PowerShell in backend folder
3. Run command:
   python -c "import secrets; print(secrets.token_urlsafe(32))"
4. Copy the output (looks like: AbCdEfGhI...)
5. Paste in .env as: SECRET_KEY=your_generated_key_here

Example Output:
SECRET_KEY=A-8K_mZ9pQwXyZ1jH4tL5vN6rB2cD3fG4

---

VARIABLE 2: DATABASE_URL
Purpose: PostgreSQL connection string (for local development)
Type: Connection URL
Required: YES
Default: postgresql://user:password@localhost:5432/contextmeet

How to Configure (Using Local PostgreSQL):

Step A: Download PostgreSQL
1. Visit: https://www.postgresql.org/download/
2. Choose your OS (Windows/Mac/Linux)
3. Download and install PostgreSQL 14+
4. During installation, remember the password for 'postgres' user
5. Default port is 5432

Step B: Create Database
1. Open pgAdmin (comes with PostgreSQL)
   Or use command line:
2. Connect to PostgreSQL:
   psql -U postgres
3. Create database:
   CREATE DATABASE contextmeet;
4. Exit: \q

Step C: Set Environment Variable
DATABASE_URL=postgresql://postgres:your_password@localhost:5432/contextmeet

Replace:
- your_password: The password you set during PostgreSQL installation

Example:
DATABASE_URL=postgresql://postgres:myPassword123@localhost:5432/contextmeet

---

VARIABLE 3: DATABASE_ASYNC_URL
Purpose: Async PostgreSQL connection (FastAPI compatible)
Type: Connection URL
Required: YES
Default: postgresql+asyncpg://user:password@localhost:5432/contextmeet

How to Set:
Same as DATABASE_URL but add "+asyncpg" after "postgresql"

Example:
DATABASE_ASYNC_URL=postgresql+asyncpg://postgres:myPassword123@localhost:5432/contextmeet

---

VARIABLE 4: GOOGLE_CLIENT_ID
Purpose: Google OAuth2 authentication
Type: String ID
Required: YES
Default: None

How to Obtain:

Step 1: Go to Google Cloud Console
1. Visit: https://console.cloud.google.com
2. Click "Select a Project" at top
3. Click "NEW PROJECT"
4. Name: "ContextMeet"
5. Click "CREATE"
6. Wait for project to be created

Step 2: Enable Google Calendar API
1. In left sidebar, click "APIs & Services"
2. Click "Enable APIs and Services"
3. Search for "Google Calendar API"
4. Click on it
5. Click "ENABLE"
6. Wait for completion

Step 3: Create OAuth Credentials
1. In left sidebar, click "Credentials"
2. Click "Create Credentials" button
3. Choose "OAuth client ID"
4. If prompted: Click "Configure OAuth consent screen"

Step 4: Configure OAuth Consent Screen
1. Choose "External" user type
2. Click "CREATE"
3. Fill form:
   - App name: ContextMeet
   - User support email: your_email@gmail.com
   - Developer contact email: your_email@gmail.com
4. Click "SAVE AND CONTINUE"
5. Scopes: Click "ADD OR REMOVE SCOPES"
   - Search and select:
     * https://www.googleapis.com/auth/calendar
     * https://www.googleapis.com/auth/gmail.send
     * https://www.googleapis.com/auth/gmail.readonly
   - Click "UPDATE"
6. Click "SAVE AND CONTINUE"
7. Test users: Add your Gmail address
8. Click "SAVE AND CONTINUE" then "BACK TO DASHBOARD"

Step 5: Back to OAuth Credentials
1. Go back to "Credentials" page
2. Click "Create Credentials" again
3. Choose "OAuth client ID"
4. Application type: "Web application"
5. Name: "ContextMeet Frontend"
6. Authorized redirect URIs - Add both:
   - http://localhost:3000/auth/callback
   - http://localhost:8000/auth/callback
7. Click "CREATE"
8. Copy the "Client ID" (looks like: ...apps.googleusercontent.com)

GOOGLE_CLIENT_ID=xxxxxxxxxxxxx.apps.googleusercontent.com

---

VARIABLE 5: GOOGLE_CLIENT_SECRET
Purpose: Secret key to verify OAuth requests
Type: String (confidential)
Required: YES
Default: None

How to Obtain:
Same page as GOOGLE_CLIENT_ID:
1. In credentials table, you should see your OAuth 2.0 Client
2. Copy the "Client Secret" value
3. KEEP THIS SECRET - Never share or commit to GitHub

GOOGLE_CLIENT_SECRET=xxxxxxxxxxxxxxxxxxxxx

---

VARIABLE 6: GOOGLE_REDIRECT_URI
Purpose: Where Google redirects after authentication
Type: URL
Required: YES
Default: http://localhost:3000/auth/callback

For development:
GOOGLE_REDIRECT_URI=http://localhost:3000/auth/callback

For production (later):
GOOGLE_REDIRECT_URI=https://yourdomain.com/auth/callback

---

VARIABLE 7: GMAIL_EMAIL
Purpose: Email account for sending notifications
Type: Gmail address
Required: YES
Default: None

How to Set:
1. Use any Gmail account (create one if needed)
2. Gmail address example: myemail@gmail.com

GMAIL_EMAIL=myemail@gmail.com

---

VARIABLE 8: GMAIL_APP_PASSWORD
Purpose: Secure password to access Gmail via API
Type: Generated password
Required: YES
Default: None

How to Obtain:

Step 1: Enable 2-Factor Authentication
1. Go to: https://myaccount.google.com/security
2. Scroll to "2-Step Verification"
3. If not enabled, click to enable it
4. Follow Google's instructions

Step 2: Generate App Password
1. Go to: https://myaccount.google.com/apppasswords
2. Select App: "Mail"
3. Select Device: "Windows Computer" (or your OS)
4. Click "GENERATE"
5. Google will show a 16-character password
6. Copy this password (remove spaces)

Example:
GMAIL_APP_PASSWORD=abcdefghijklmnop

---

VARIABLE 9: TELEGRAM_BOT_TOKEN
Purpose: Access token for Telegram Bot API
Type: String token
Required: YES
Default: None

How to Obtain:

Step 1: Talk to BotFather
1. Open Telegram app (or web.telegram.org)
2. Search for: @BotFather
3. Click "START" button
4. Send message: /newbot

Step 2: Create Your Bot
1. Answer questions:
   - What should your bot be called? → ContextMeetBot
   - Give your bot a username? → contextmeet_bot (must be unique)
2. BotFather will respond with:
   "Done! Congratulations on your new bot. You will find it at
   t.me/contextmeet_bot. You can now add a description..."

3. Copy the token (looks like: 123456:ABCDefGhIjKlMnOpQrStUvWxYz)

TELEGRAM_BOT_TOKEN=123456:ABCDefGhIjKlMnOpQrStUvWxYz

---

VARIABLE 10: MISTRAL_BASE_URL
Purpose: Local Ollama/Mistral server address
Type: URL
Required: YES
Default: http://localhost:11434

How to Set:

Step 1: Install Ollama
1. Visit: https://ollama.ai/download
2. Download for your OS (Windows/Mac/Linux)
3. Install Ollama

Step 2: Download Mistral Model
1. Open terminal/PowerShell
2. Run: ollama pull mistral
3. Wait for download to complete (may take 5-10 minutes)

Step 3: Start Ollama Server
1. Ollama runs in background by default after installation
2. Verify it's running:
   curl http://localhost:11434/api/tags
3. If successful, you'll see model list

MISTRAL_BASE_URL=http://localhost:11434

---

VARIABLE 11: ENVIRONMENT
Purpose: Application mode (development/production)
Type: String
Required: YES
Default: development

For development:
ENVIRONMENT=development

For production (later):
ENVIRONMENT=production

---

VARIABLE 12: DEBUG
Purpose: Enable/disable debug mode
Type: Boolean
Required: YES
Default: True

For development:
DEBUG=True

For production:
DEBUG=False

---

VARIABLE 13: ALGORITHM
Purpose: JWT signing algorithm
Type: String
Required: NO (has default)
Default: HS256

ALGORITHM=HS256

---

VARIABLE 14: ACCESS_TOKEN_EXPIRE_MINUTES
Purpose: JWT token expiration time
Type: Integer (minutes)
Required: NO (has default)
Default: 30

ACCESS_TOKEN_EXPIRE_MINUTES=30

---

VARIABLE 15: ALLOWED_ORIGINS
Purpose: CORS allowed origins
Type: Comma-separated URLs
Required: YES
Default: http://localhost:3000

For development:
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:8000

---

VARIABLE 16: SENTRY_DSN
Purpose: Error tracking service (optional)
Type: URL
Required: NO (optional for MVP)
Default: Empty

How to Obtain (Optional):
1. Visit: https://sentry.io (free tier available)
2. Sign up with GitHub account
3. Create project: Python + FastAPI
4. Copy the DSN URL

SENTRY_DSN=https://key@sentry.io/project-id

For MVP, you can leave this empty (remove the line or leave blank)

---

VARIABLE 17: LOG_LEVEL
Purpose: Console logging verbosity
Type: String
Required: NO (has default)
Default: INFO

Options:
- DEBUG (most verbose)
- INFO
- WARNING
- ERROR
- CRITICAL

For development:
LOG_LEVEL=INFO

================================================================================
SECTION 2: FRONTEND ENVIRONMENT VARIABLES
================================================================================

File: frontend/.env.local

Total variables needed: 4
These are simpler than backend.

---

VARIABLE 1: NEXT_PUBLIC_API_URL
Purpose: Backend API address
Type: URL
Required: YES
Default: http://localhost:8000

How to Set:
For development (local):
NEXT_PUBLIC_API_URL=http://localhost:8000

For production (later):
NEXT_PUBLIC_API_URL=https://api.yourdomain.com

---

VARIABLE 2: NEXT_PUBLIC_GOOGLE_CLIENT_ID
Purpose: Google OAuth client ID (same as backend)
Type: String
Required: YES
Default: None

How to Set:
Copy the SAME value from backend GOOGLE_CLIENT_ID

NEXT_PUBLIC_GOOGLE_CLIENT_ID=xxxxxxxxxxxxx.apps.googleusercontent.com

---

VARIABLE 3: NEXT_PUBLIC_APP_NAME
Purpose: Application branding
Type: String
Required: NO (has default)
Default: ContextMeet

NEXT_PUBLIC_APP_NAME=ContextMeet

---

VARIABLE 4: NEXT_PUBLIC_APP_VERSION
Purpose: Version display
Type: String version
Required: NO (has default)
Default: 1.0.0

NEXT_PUBLIC_APP_VERSION=1.0.0

================================================================================
SECTION 3: COMPLETE SETUP SUMMARY CHECKLIST
================================================================================

Backend (.env) - 17 variables:

[ ] SECRET_KEY - Python generated key
[ ] DATABASE_URL - PostgreSQL connection
[ ] DATABASE_ASYNC_URL - Async PostgreSQL connection
[ ] GOOGLE_CLIENT_ID - From Google Cloud Console
[ ] GOOGLE_CLIENT_SECRET - From Google Cloud Console
[ ] GOOGLE_REDIRECT_URI - http://localhost:3000/auth/callback
[ ] GMAIL_EMAIL - Your Gmail address
[ ] GMAIL_APP_PASSWORD - Google app-specific password
[ ] TELEGRAM_BOT_TOKEN - From BotFather
[ ] MISTRAL_BASE_URL - http://localhost:11434
[ ] ENVIRONMENT - development
[ ] DEBUG - True
[ ] ALGORITHM - HS256
[ ] ACCESS_TOKEN_EXPIRE_MINUTES - 30
[ ] ALLOWED_ORIGINS - http://localhost:3000,http://localhost:3001,http://localhost:8000
[ ] SENTRY_DSN - Optional (leave blank for MVP)
[ ] LOG_LEVEL - INFO

Frontend (.env.local) - 4 variables:

[ ] NEXT_PUBLIC_API_URL - http://localhost:8000
[ ] NEXT_PUBLIC_GOOGLE_CLIENT_ID - Same as backend
[ ] NEXT_PUBLIC_APP_NAME - ContextMeet
[ ] NEXT_PUBLIC_APP_VERSION - 1.0.0

================================================================================
SECTION 4: SETUP ORDER (RECOMMENDED)
================================================================================

Phase 1: Local Database (5 minutes)
1. Install PostgreSQL
2. Create contextmeet database
3. Set DATABASE_URL and DATABASE_ASYNC_URL

Phase 2: Python Keys (2 minutes)
1. Generate SECRET_KEY using Python
2. Set ACCESS_TOKEN_EXPIRE_MINUTES, ALGORITHM, etc.

Phase 3: Google OAuth (10 minutes)
1. Create Google Cloud project
2. Enable Calendar API and Gmail API
3. Configure OAuth consent screen
4. Create OAuth credentials
5. Get GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET
6. Set GOOGLE_REDIRECT_URI

Phase 4: Gmail Setup (5 minutes)
1. Enable 2FA on Gmail
2. Generate app-specific password
3. Set GMAIL_EMAIL and GMAIL_APP_PASSWORD

Phase 5: Telegram Setup (2 minutes)
1. Talk to BotFather
2. Create bot
3. Set TELEGRAM_BOT_TOKEN

Phase 6: Mistral AI (10 minutes)
1. Download and install Ollama
2. Pull Mistral model
3. Verify MISTRAL_BASE_URL works

Phase 7: Frontend Config (1 minute)
1. Copy GOOGLE_CLIENT_ID to frontend
2. Set NEXT_PUBLIC_API_URL
3. Set other frontend variables

Total Time: ~35 minutes (first time setup)

================================================================================
SECTION 5: VERIFICATION STEPS
================================================================================

After setting all variables, verify they work:

Backend Verification:
1. Navigate to backend folder: cd backend
2. Start backend: python -m app.main
3. Check: http://localhost:8000/health should return status

Mistral Verification:
1. Ensure Ollama is running
2. Test: curl http://localhost:11434/api/tags
3. Should see mistral in the list

Database Verification:
1. From backend folder, run: python
2. Type: from app.core.config import db_manager
3. Type: import asyncio
4. Type: asyncio.run(db_manager.initialize())
5. Should not show database connection errors

Google OAuth Verification:
1. Check Google Cloud Console
2. Verify credentials show your redirect URIs
3. Test OAuth flow later during frontend setup

Frontend Verification:
1. Navigate to frontend folder: cd frontend
2. Create .env.local file
3. Paste frontend variables
4. Run: npm run dev
5. Check: http://localhost:3000 loads without errors

================================================================================
SECTION 6: TROUBLESHOOTING
================================================================================

Problem: PostgreSQL connection refused
Solution:
- Ensure PostgreSQL service is running
- Windows: Services app -> PostgreSQL should be running
- Mac: brew services list | grep postgres
- Check port 5432 is not blocked by firewall

Problem: Database doesn't exist
Solution:
- Run: psql -U postgres
- Run: CREATE DATABASE contextmeet;
- Verify with: \l (list databases)

Problem: Gmail app password fails
Solution:
- Ensure 2FA is enabled on Gmail account
- Try removing spaces from password
- Generate new password and retry

Problem: Telegram bot token invalid
Solution:
- Verify token format (###:ABC...)
- Ensure no extra spaces
- Test with: curl https://api.telegram.org/botTOKEN/getMe

Problem: Mistral model not found
Solution:
- Run: ollama pull mistral
- Wait for download to complete
- Restart Ollama service
- Verify: curl http://localhost:11434/api/tags

Problem: CORS errors in frontend
Solution:
- Ensure ALLOWED_ORIGINS includes frontend URL
- Restart backend after changing ALLOWED_ORIGINS
- Check browser console for exact error

================================================================================
END OF ENVIRONMENT SETUP GUIDE
================================================================================

Questions about specific variables? Review the section above for that variable.
